<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="../images/favicon1.png">
    <title>QR Insight</title>
    <!---------Icons Import-----  -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <link rel="stylesheet" href="../Styles/index.css">
    <!-- <link rel="stylesheet" href="./Styles/botchat.css"> -->
</head>

<body>
    <!-- --------Navigation Part--------- -->
    <nav>
        <div>
            <a href="../index.html">
                <img id="logo" src="../images/logo.png" alt="">
            </a>
        </div>
        <div class="dropdown">
            <h4 class="nav-elem">Products <ion-icon name="chevron-down-outline"></ion-icon></h4>
            <div class="dropdown-content">
                <a href="./scannar.html">
                    <img src="https://media.istockphoto.com/id/1324087782/vector/qr-code-smartphone-in-hand-icon-abstract-vector-bar-code-vector-illustration.jpg?s=612x612&w=0&k=20&c=DxsBC2ZrRysegucpg5qHJd6BR_dxmPAWpSaRvVbLvLc="
                        alt="">
                    QR Scanner
                </a>
                <a href="./qr.html">
                    <img src="https://www.unitag.io/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fqr-code-free.491f89af.png&w=96&q=75"
                        alt="">
                    QR Code Generator
                </a>
                <a href="./scannar.html">
                    <img src="https://www.unitag.io/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fanalytics-blue.5188059c.png&w=96&q=75"
                        alt="">
                    Detail Analysis
                </a>
                <a href="./qr.html">
                    <img src="https://www.unitag.io/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fdynamic_qr.ace7a1d3.png&w=96&q=75"
                        alt="">
                    Dynamic QR Code
                </a>
            </div>
        </div>
        <div class="dropdown">
            <h4 class="nav-elem">Pricing <ion-icon name="chevron-down-outline"></ion-icon> </h4>
            <div class="dropdown-content">

                <a href=""><img
                        src="https://www.unitag.io/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fpackaging-blue.284a8c8b.png&w=96&q=75"
                        alt=""> Price Calculator</a>
                <p>QR Insight - Price Calculator , Check Which Plan Suits You</p>
            </div>
        </div>
        <div>
            <a href="./about.html">
                <h4 class="nav-elem">About Us</h4>
            </a>
        </div>
        <div>
            <h4 class="nav-elem">Contact</h4>
        </div>
        <div>
            <p class="userName2"></p>
        </div>
        <div>
            <div class="dropdown">
                <ion-icon id="userIcon" name="person-circle-outline"></ion-icon>
                <div class="dropdown-content" id="user-dropdown">
                    <a href="">
                        <p class="userName1"></p>
                    </a>
                    <a href="">
                        <p id="userDetails">Profile</p>
                    </a>
                    <a href="" id="Dashboard_admin_nav">
                        <p>Dashboard</p>
                    </a>
                    <a href="">
                        <p onclick="clearLocalStorage()" id="logoutBtn">Logout</p>
                    </a>

                </div>
            </div>
        </div>
        <div>
            <a href="./View/login.html">
                <button id="loginBtn" class="Btn">Login</button>
            </a>
        </div>
        <div onclick="hamburger()">
            <ion-icon class="menu-icon" name="menu-outline"></ion-icon>
        </div>
        </div>
    </nav>

    <!-- -----------Hamburger Menu----------- -->

    <div class="menu-page">
        <div>
            <img id="logo" src="./images/logo.png" alt="">
            <div onclick="remove()"><ion-icon name="close"></ion-icon></div>
        </div>
        <div class="dropdown-container">
            <h1>Products</h1>
            <div class="dropdown-menu">
                <div><a href="./View/scannar.html">QR Scanner</a></div>
                <div><a href="./View/qr.html">QR Code Generator</a></div>
                <div><a href="./View/scannar.html">Detail Analysis</a></div>
                <div><a href="./View/qr.html">Dynamic QR Code</a></div>
            </div>
            <div onclick="openProduct()">
                <ion-icon class="down-arrow" name="chevron-down-circle-outline"></ion-icon>
            </div>

        </div>
        <div>
            <h1>Pricing</h1>
            <div class="dropdown-price">
                <div><a href="">Calculate Amount</a></div>
                <div><a href="">Subscribe</a></div>
            </div>
            <div onclick="openPrice()">
                <ion-icon class="down-arrow" name="chevron-down-circle-outline"></ion-icon>
            </div>
        </div>
        <h1><a href="./View/about.html"> About Us</a></h1>
        <h1><a href="">Contact</a> </h1>

    </div>

    <!-- ------------ChatBot Icon-------- -->

    <div id="chatBot">
        <a href="./View/botchat.html" target="_blank"><ion-icon id="chatbot-icon"
                name="chatbubble-ellipses-outline"></ion-icon></a>
    </div>

    <!-- ---------------Content On Profile Page--------------- -->

    <div id="profile-container">
        <div id="img-container">
            <div id="profile-pic">
                <img src="https://img.freepik.com/premium-vector/man-profile-cartoon_18591-58482.jpg?w=900" alt="">
            </div>
            <div id="backgroung-img">
                <img src="https://img.freepik.com/free-photo/navy-blue-concrete-wall-with-scratches_53876-102666.jpg?w=1380&t=st=1683553727~exp=1683554327~hmac=e88ce4295ca6d3e4215cfe09c38cfb7f792dc879f72968e5810b1bb8296f07ba" alt="">
            </div>
            <div><h2 id="login-user-name"></h2></div>
        </div>        
        <div>
            <form>

                <label for="email">Email ID:</label>
                <input type="email" id="login-user-email"  disabled><br>
              
                <label for="address">Address:</label>
                <input type="text" id="login-user-address"  disabled><br>
              
                <label for="gender">Gender:</label>
                <input type="text" id="login-user-gender"  disabled>
              
                <label for="role">Role:</label>
                <input type="text" id="login-user-role"  disabled><br>
              
                <!-- <input type="submit" value="Submit"> -->
               <div>
                 <button id="user-profile-updateBtn">Update</button>    
                 
                    <button id="user-profile-updatePassword" onclick="updatePassword()"> Change Password</button>
                   
                 <button id="user-profile-deleteBtn">Delete My Account</button>
               </div>
                
            </form>              
        </div>

    </div>


    <!-------------Footer-------------  -->
    <footer>

        <div id="footer-contact">
            <div>
                <div class="contact">
                    <div> <ion-icon name="location-sharp"></ion-icon></div>

                    <p>House N0 1 Shivaji Nagar ,Gandhi Road ,Delhi ,New Delhi</p>
                </div>
                <div class="contact">
                    <div><ion-icon class="chat-icon" name="chatbubble-ellipses-outline"></ion-icon></div>

                    <p><a href="./View/botchat.html" target="_blank">
                        Chat With Us
                    </a></p>
                </div>
                <div class="contact">
                    <div> <ion-icon class="mail-icon" name="mail-sharp"></ion-icon> </div>

                    <!-- Contact us page link -->
                    <p>
                        <a href="">
                            Contact Us
                        </a>
                    </p>
                </div>
            </div>
        </div>
        <div>
            <h3>Useful Links</h3>
            <p>
                <a href="./View/scannar.html">
                    QR Scanner
                </a>
            </p>
            <p>
                <a href="./View/qr.html">
                    QR Code Generator
                </a>
            </p>
            <p>
                <a href="./View/scannar.html">
                    Detail Analysis
                </a>
            </p>
            <p>
                <a href="./View/qr.html">
                    Dynamic QR Code
                </a>
            </p>

        </div>
        <div>
            <h3>About</h3>
            <p>
                <a href="./View/about.html">
                    About Us
                </a>
            </p>
            <p>
                <a href="">
                    Contact
                </a>
            </p>
            <p>
                <a href="./View/about.html">
                    Blog
                </a>
            </p>
        </div>

        <div class="socialmedia">
            <h3>Social-Media</h3>
            <ion-icon name="logo-facebook"></ion-icon>
            <ion-icon name="logo-linkedin"></ion-icon>
            <ion-icon name="logo-twitter"></ion-icon>
            <a href="https://github.com/Niteshthori24198/substantial-money-3994" target="_blank">
                <ion-icon name="logo-github"></ion-icon>
            </a>
        </div>
    </footer>
</body>

</html>



<script src="./Scripts/userdisplay.js"></script>
<script src="./Scripts//navbar.js"></script>

<script>
    
    setTimeout(()=>{
        showUsername();
    populate();   
    },1000)
    

    function showUsername() {
        const name1 = document.querySelector(".userName1")
        const name2 = document.querySelector(".userName2")
        const details = JSON.parse(localStorage.getItem("qrcodeuserdetails")) || null

        if (details) {
            name1.textContent = details.Name.split(" ")[0]
            name2.textContent = details.Name.split(" ")[0]
            document.getElementById("logoutBtn").style.display = "block"
            document.getElementById("loginBtn").style.display = "none"
            document.getElementById("userIcon").style.display = "block"

            if (details.Role === "Admin") {
                document.getElementById('Dashboard_admin_nav').style.display = "block"
            }

        }
    }

    function clearLocalStorage() {
        localStorage.removeItem('qrcodeuserdetails');
        document.getElementById("logoutBtn").style.display = "none"
        document.getElementById("loginBtn").style.display = "block"

        document.getElementById('Dashboard_admin_nav').style.display = "none"

        document.getElementById("userIcon").style.display = "none"

        // clearing query from link

        var currentUrl = window.location.href;

        // Check if the URL contains the query parameter we want to remove
        if (currentUrl.indexOf('?userid=') !== -1) {
            // Remove the query parameter
            var newUrl = currentUrl.replace(/(\?|&)userid=[^&]*(&|$)/, '$1');

            // Update the URL without refreshing the page
            history.replaceState(null, null, newUrl);
        }

        alert("Logout Successfully")
    }
    
    

    function populate(){
        const details = JSON.parse(localStorage.getItem("qrcodeuserdetails")) || null
        console.log(details)

        if(details){
            const userName=document.getElementById("login-user-name")
            // const userPassword=document.getElementById("login-user-password")
            const userEmail=document.getElementById("login-user-email")
            const userAddress=document.getElementById("login-user-address")
            const userRole=document.getElementById("login-user-role")
            const userGender=document.getElementById("login-user-gender")

            userName.value=details.Name;
            // userPassword.value=details.Password;
            userEmail.value=details.Email;
            userAddress.value=details.Address;
            userRole.value=details.Role;
            userGender.value=details.Gender
        }
    }

    function updatePassword(){
        console.log("update")
        location.href="./forgetpass.html"
    }

</script>